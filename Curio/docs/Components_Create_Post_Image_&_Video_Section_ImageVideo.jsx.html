<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Components/Create_Post/Image_&_Video_Section/ImageVideo.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Components/Create_Post/Image_&_Video_Section/ImageVideo.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Component for uploading and displaying images or videos.
 * @component
 * @param {Object} props - The props object containing the component's properties.
 * @param {function} props.onImageUpload - Function to handle uploaded image or video.
 * @module ImageVideo
 */
import React, { useState, useRef, useEffect } from 'react';
import './ImageVideo.css';
import { Button, Modal, ModalOverlay, ModalContent, ModalHeader, ModalFooter, ModalBody, useDisclosure } from '@chakra-ui/react';

function ImageVideo(props) {
  const [file, setFile] = useState(null);
  const fileInputRef = useRef(null);
  const { isOpen, onOpen, onClose } = useDisclosure();

  useEffect(() => {
    if (file){
      handleUpload();
    }
  }, [file]);

  const handleFileChange = async (event) => {
    const selectedFile = event.target.files[0];
    if (selectedFile) {
      if (selectedFile.type &amp;&amp; selectedFile.type.includes('image')) {
        setFile({ type: 'image', file: selectedFile }); 
      } else if (selectedFile.type &amp;&amp; selectedFile.type.includes('video')) {
        setFile({ type: 'video', file: selectedFile });
      } else {
        console.error('Unsupported file type');
      }
    }
  };

  const handleDelete = () => {
    onClose();
    setFile(null);
  };

  const handleButtonClick = () => {
    fileInputRef.current.click();
  };

  const handleUpload = async () => {
    try {
      const formData = new FormData();
      formData.append('media', file.file);

      // Pass image data to the parent component
      props.onImageUpload(formData);
    } catch (error) {
      console.error('Error uploading file:', error);
    }
  };

  const handleDragOver = (event) => {
    event.preventDefault();
    event.stopPropagation();
  };

  const handleDragEnter = (event) => {
    event.preventDefault();
    event.stopPropagation();
  };

  const handleDragLeave = (event) => {
    event.preventDefault();
    event.stopPropagation();
  };

  const handleDrop = (event) => {
    event.preventDefault();
    event.stopPropagation();
    const droppedFile = event.dataTransfer.files[0];
    if (droppedFile) {
      if (droppedFile.type.includes('image')) {
        setFile({ type: 'image', file: droppedFile });
        handleUpload();
      } else if (droppedFile.type.includes('video')) {
        setFile({ type: 'video', file: droppedFile });
        handleUpload();
      } else {
        console.error('Unsupported file type');
      }
    }
  };

  return (
    &lt;div className='image-video-container' onDragOver={handleDragOver} onDragEnter={handleDragEnter} onDragLeave={handleDragLeave} onDrop={handleDrop}>
      &lt;div className='file-input-container'>
        &lt;div className='upload-container'>
          &lt;input
            ref={fileInputRef}
            type="file"
            accept="image/*,video/*"
            className='file-input'
            onChange={handleFileChange}
            style={{ display: 'none' }}
          />
          &lt;div className='upload-button-container'>
            {file ? (
              &lt;div className="uploaded-content">
                {file.type === 'image' ? (
                  &lt;img src={URL.createObjectURL(file.file)} alt="Uploaded File" className="uploaded-image" />
                ) : (
                  &lt;video controls className="uploaded-video">
                    &lt;source src={URL.createObjectURL(file.file)} type={file.file.type} />
                    Your browser does not support the video tag.
                  &lt;/video>
                )}
                &lt;div className="delete-button-container">
                  &lt;button role="button" tabIndex="-1" aria-label="Remove" className='delete-button' onClick={onOpen}>
                    &lt;i className="fa-solid fa-trash" />
                  &lt;/button>
                &lt;/div>
              &lt;/div>
            ) : (
              &lt;p className='upload-text'>
                Drag and drop images or videos
                &lt;Button
                  className="upload-button"
                  variant='outline'
                  colorScheme='blue'
                  style={{
                    borderRadius: '9999px',
                    display: 'inline-block',
                    margin: '10px 8px',
                    lineHeight: '18px',
                    position: 'relative',
                    boxSizing: 'border-box',
                    fontFamily: 'Noto Sans, Arial, sans-serif',
                    fontSize: '14px',
                  }}
                  onClick={handleButtonClick}
                >
                  Upload
                &lt;/Button>
              &lt;/p>
            )}
          &lt;/div>
        &lt;/div>
      &lt;/div>
      &lt;Modal isOpen={isOpen} onClose={onClose}>
        &lt;ModalOverlay />
        &lt;ModalContent>
          &lt;ModalHeader>Remove image?&lt;/ModalHeader>
          &lt;ModalBody>
            Are you sure you want to remove your image?
          &lt;/ModalBody>
          &lt;ModalFooter>
            &lt;Button
              variant='outline'
              colorScheme='blue'
              mr={3}
              onClick={onClose}
              style={{
                borderRadius: '9999px',
              }}>
              Keep
            &lt;/Button>
            &lt;Button
              colorScheme='blue'
              onClick={handleDelete}
              style={{
                borderRadius: '9999px',
              }}>
              Remove
            &lt;/Button>
          &lt;/ModalFooter>
        &lt;/ModalContent>
      &lt;/Modal>
    &lt;/div>
  );
}

export default ImageVideo;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AboutDrawer.html">AboutDrawer</a></li><li><a href="module-Advanced.html">Advanced</a></li><li><a href="module-ChooseCommunity.html">ChooseCommunity</a></li><li><a href="module-Community.html">Community</a></li><li><a href="module-CommunityDetails.html">CommunityDetails</a></li><li><a href="module-CommunityRules.html">CommunityRules</a></li><li><a href="module-CreatePost.html">CreatePost</a></li><li><a href="module-CreatePostArea.html">CreatePostArea</a></li><li><a href="module-CurioInput.html">CurioInput</a></li><li><a href="module-EditCreatearea.html">EditCreatearea</a></li><li><a href="module-HeaderChatRightSide.html">HeaderChatRightSide</a></li><li><a href="module-ImageVideo.html">ImageVideo</a></li><li><a href="module-InviteDrawer.html">InviteDrawer</a></li><li><a href="module-Link.html">Link</a></li><li><a href="module-LiveChat.html">LiveChat</a></li><li><a href="module-NewChat.html">NewChat</a></li><li><a href="module-NewPostForm.html">NewPostForm</a></li><li><a href="module-Notifications.html">Notifications</a></li><li><a href="module-NotificationsDropdown.html">NotificationsDropdown</a></li><li><a href="module-NotificationsEndPoints.html">NotificationsEndPoints</a></li><li><a href="module-NotificationsFunctions.html">NotificationsFunctions</a></li><li><a href="module-NotificationsPage.html">NotificationsPage</a></li><li><a href="module-OpenChat.html">OpenChat</a></li><li><a href="module-OpenChatComLeftSide.html">OpenChatComLeftSide</a></li><li><a href="module-Polls.html">Polls</a></li><li><a href="module-Post.html">Post</a></li><li><a href="module-PostMethods.html">PostMethods</a></li><li><a href="module-PostingCards.html">PostingCards</a></li><li><a href="module-PostingRules.html">PostingRules</a></li><li><a href="module-ProfileCategory.html">ProfileCategory</a></li><li><a href="module-ProfileImageUpload.html">ProfileImageUpload</a></li><li><a href="module-ProfileInformation.html">ProfileInformation</a></li><li><a href="module-ProfileSettingPage.html">ProfileSettingPage</a></li><li><a href="module-Schedule.html">Schedule</a></li><li><a href="module-SocialLinksSection.html">SocialLinksSection</a></li><li><a href="module-SocialMediaModal.html">SocialMediaModal</a></li><li><a href="module-SocialUsernameModal.html">SocialUsernameModal</a></li><li><a href="module-Socialmodal.html">Socialmodal</a></li><li><a href="module-Threads.html">Threads</a></li><li><a href="module-TypeUsername.html">TypeUsername</a></li><li><a href="module-UserFunctions.html">UserFunctions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Fri May 10 2024 03:33:08 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
